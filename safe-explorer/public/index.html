<!DOCTYPE html>
<html>
<head>
  <title>Safe Explorer - Pick Your Level</title>
  <style>
    body { font-family: Arial; text-align: center; padding: 20px; background: #1a1a2e; color: white; }
    .level-card { display: inline-block; width: 300px; margin: 20px; padding: 20px; background: #16213e; border-radius: 10px; cursor: pointer; transition: transform 0.3s; }
    .level-card:hover { transform: scale(1.05); }
    .level-1 { border: 3px solid #4CAF50; }
    .level-2 { border: 3px solid #FF9800; }
    .level-3 { border: 3px solid #f44336; }
    #session-area { display: none; margin-top: 30px; }
    #proxy-frame { width: 95%; height: 70vh; border: none; border-radius: 10px; }
    .countdown { font-size: 3em; margin: 20px 0; }
    button { padding: 15px 30px; font-size: 18px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px; }
    .about { background: #0f3460; padding: 20px; margin: 20px auto; max-width: 800px; border-radius: 10px; }
  </style>
</head>
<body>
  <h1>ğŸ” Safe Internet Explorer</h1>
  
  <div class="about">
    <h2>ğŸ“– About</h2>
    <p><strong>Level 1 (Green):</strong> Normal web like Google/YouTube. 100% safe.</p>
    <p><strong>Level 2 (Orange):</strong> Deep web = academic papers, research databases, private forums. Educational only.</p>
    <p><strong>Level 3 (Red):</strong> Dark web preview = .onion news sites, safe Tor links. Strictest safety mode.</p>
    <p>All sessions <strong>auto-delete after 30min</strong>. No tracking, no downloads allowed.</p>
  </div>

  <h2>Choose Your Level (30min Session)</h2>
  
  <div class="level-card level-1" onclick="startSession(1)">
    <h3>ğŸŒ Level 1: Surface Web</h3>
    <p>Google, Wikipedia, safe sites</p>
    <strong>ğŸ‘¶ Beginner Friendly</strong>
  </div>

  <div class="level-card level-2" onclick="startSession(2)">
    <h3>ğŸ” Level 2: Deep Web</h3>
    <p>Academic papers, research DBs</p>
    <strong>ğŸ“š Educational</strong>
  </div>

  <div class="level-card level-3" onclick="startSession(3)">
    <h3>ğŸ•µï¸ Level 3: Dark Web Preview</h3>
    <p>Safe .onion news + Tor links</p>
    <strong>âš ï¸ Advanced - Strict Safety</strong>
  </div>

  <div id="session-area">
    <div id="status"></div>
    <div id="countdown" class="countdown"></div>
    <iframe id="proxy-frame"></iframe>
  </div>

  <script>
    let timeLeft, currentLevel;
    
    async function startSession(level) {
      currentLevel = level;
      const res = await fetch('/api/start-session', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({level})
      });
      const data = await res.json();
      timeLeft = data.timeLeft;
      
      document.querySelectorAll('.level-card').forEach(c => c.style.display = 'none');
      document.getElementById('session-area').style.display = 'block';
      
      loadLevelContent();
      updateTimer();
    }
    
    function loadLevelContent() {
      const status = document.getElementById('status');
      const frame = document.getElementById('proxy-frame');
      
      if (currentLevel === 1) {
        status.innerHTML = 'ğŸŒ Level 1 Active - Surface Web';
        frame.src = 'https://www.duckduckgo.com/?q=internet+safety';
      } else if (currentLevel === 2) {
        status.innerHTML = 'ğŸ” Level 2 Active - Deep Web';
        frame.src = 'https://www.jstor.org/search?Query=deep+web';
      } else {
        status.innerHTML = 'ğŸ•µï¸ Level 3 Active - Dark Web Preview';
        frame.src = 'https://duckduckgogg42xjoc72x3sjasowoarfbgcmvfimaftt6twagswzczad.onion/';
      }
    }
    
    function updateTimer() {
      const timer = document.getElementById('countdown');
      const mins = Math.floor(timeLeft / 60000);
      const secs = ((timeLeft % 60000) / 1000).toFixed(0);
      timer.textContent = `${mins}:${secs.padStart(2, '0')}`;
      
      if (timeLeft > 0) {
        timeLeft -= 1000;
        setTimeout(updateTimer, 1000);
      } else {
        location.reload();
      }
    }
  </script>
</body>
</html>
